(this["webpackJsonpwatermelon-react"]=this["webpackJsonpwatermelon-react"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/watermelon_04.17098dbf.png"},23:function(e,t,a){e.exports=a(49)},28:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),i=a.n(c),l=(a(28),a(6)),u=a(1),s=a(2),o=a.n(s),d=a(4),m=a(8),b=a(10),f=a(7),p=a.n(f),y=p.a.create({baseURL:"https://www.googleapis.com/youtube/v3"}),k=r.a.createContext([{},function(){}]),v=function(e){var t=Object(n.useState)({genre:{path:"DM0000",id:"top100",text:"Top 100"},tracks:{},customPlaylist:[],playlistTracks:[],currentSong:{},watchingPlaylist:!1}),a=Object(m.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(!1),f=Object(m.a)(s,2),v=f[0],h=f[1],g=function(){var e=Object(d.a)(o.a.mark((function e(t){var a,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,n=t.path,c.tracks[a]||v){e.next=15;break}if(r={headers:{"Access-Control-Expose-Headers":"User-Agent","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:77.0) Gecko/20100101 Firefox/77.0"}},i="",!(window.screen.width<767)){e.next=11;break}return e.next=7,p()("https://cors-anywhere.herokuapp.com/https://m2.melon.com/cds/main/mobile4web/main_chart.htm\n          ",r);case 7:i=e.sent,x(i.data),e.next=15;break;case 11:return e.next=13,p()("https://cors-anywhere.herokuapp.com/https://www.melon.com/chart/day/index.htm?classCd=".concat(n),r);case 13:i=e.sent,x(i.data);case 15:h(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"AIzaSyDJG4uwhqh0A4gCLmgQuDhyJM7DK57dbDk",e.next=3,y.get("/search",{params:{q:"".concat(t," ").concat(a),part:"snippet",maxResults:1,key:"AIzaSyDJG4uwhqh0A4gCLmgQuDhyJM7DK57dbDk"}});case 3:return n=e.sent,r=n.data.items[0].id.videoId,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(e){var t=document.createElement("div");if(t.innerHTML=e,window.screen.width<767){var a=t.querySelectorAll("strong.rank"),n=t.querySelectorAll(".title"),r=t.querySelectorAll(".name"),l=t.querySelectorAll(".inner>span"),s=[];a.forEach((function(e,t){var a=e.textContent,i=n[t].textContent,u=r[t].textContent,o=l[t].style.backgroundImage;o=(o=o.replace('url("//',"https:")).replace('")',""),console.log(o);var d={rank:a,title:i,artist:u,album:"",art:o,YouTubeId:"",key:e.textContent,availableAction:"add",trackGenre:c.genre.id,trackIndex:t};"undefined"===typeof c.currentSong.title&&0===t&&E(d,t,"play"),s.push(d)}));var o=Object(u.a)({},c.tracks,Object(b.a)({},c.genre.id,s));i((function(e){return Object(u.a)({},e,{tracks:o})}))}else{var d=t.querySelectorAll("#lst50 .rank, #lst100 .rank"),m=t.querySelectorAll(".rank01>span>a"),f=t.querySelectorAll(".rank02>span>a"),p=t.querySelectorAll(".rank03>a"),y=t.querySelectorAll(".image_typeAll>img"),k=t.querySelectorAll("tr[data-song-no]"),v=[];d.forEach((function(e,t){var a=e.textContent,n=m[t].textContent,r=f[t].textContent,i=p[t].textContent,l=y[t].src,u=k[t].getAttribute("data-song-no"),s=c.genre.id,o=t;console.log(l);var d={rank:a,title:n,artist:r,album:i,art:l,YouTubeId:"",key:u,availableAction:"add",trackGenre:s,trackIndex:o};"undefined"===typeof c.currentSong.title&&0===t&&E(d,t,"play"),v.push(d)}));var h=Object(u.a)({},c.tracks,Object(b.a)({},c.genre.id,v));i((function(e){return Object(u.a)({},e,{tracks:h})}))}},E=function(){var e=Object(d.a)(o.a.mark((function e(t,a,n){var r,s,d,m,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(l.a)(c.customPlaylist),d=Object(u.a)({},c.tracks),m=[c.genre.id],!t.YouTubeId){e.next=7;break}r=t.YouTubeId,e.next=10;break;case 7:return e.next=9,w(t.artist,t.title);case 9:r=e.sent;case 10:"undefined"!==typeof d[m]&&""===d[m][a].YouTubeId&&(d[m][a].YouTubeId=r,i((function(e){return Object(u.a)({},e,{tracks:d})}))),"play"===n?(b={rank:t.rank,title:t.title,artist:t.artist,album:t.album,art:t.art,YouTubeId:r,key:t.key,availableAction:t.availableAction,trackGenre:t.trackGenre,trackIndex:t.trackIndex},i((function(e){return Object(u.a)({},e,{currentSong:b})}))):s.includes(r)?(s=s.filter((function(e){return e!==r})),i((function(e){return Object(u.a)({},e,{customPlaylist:s})})),d[m][a].availableAction="add",i((function(e){return Object(u.a)({},e,{tracks:d})}))):!1===s.includes(r)&&(s=[].concat(Object(l.a)(c.customPlaylist),[r]),i((function(e){return Object(u.a)({},e,{customPlaylist:s})})),d[m][a].availableAction="delete",i((function(e){return Object(u.a)({},e,{tracks:d})})));case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){!1===v&&(h(!0),g(c.genre))}),[c.genre]),r.a.createElement(k.Provider,{value:[c,i]},e.children)},h=k,g=p.a.create({baseURL:"https://www.googleapis.com/customsearch/v1"}),w=function(){var e=Object(n.useContext)(h),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(m.a)(c,2),s=i[0],b=i[1],f=function(){var e=Object(d.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"AIzaSyDJG4uwhqh0A4gCLmgQuDhyJM7DK57dbDk",e.next=3,y.get("/search",{params:{q:"".concat(t," ").concat(a),part:"snippet",maxResults:1,key:"AIzaSyDJG4uwhqh0A4gCLmgQuDhyJM7DK57dbDk"}});case 3:return n=e.sent,r=n.data.items[0].id.videoId,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===s){e.next=2;break}return e.delegateYield(o.a.mark((function e(){var t,n,c,i,l,s,d,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),t=Object(u.a)({},a.currentSong),n=[],c=[],i="",l=Object(u.a)({},a.tracks),s=[a.genre.id],d=0;case 8:if(!(d<10)){e.next=25;break}if(""!==(m=l[s][d]).YouTubeId){e.next=16;break}return e.next=13,f(l[s][d].artist,l[s][d].title);case 13:i=e.sent,e.next=17;break;case 16:i=m.YouTubeId;case 17:t.YouTubeId===i&&(t.availableAction="delete",r((function(e){return Object(u.a)({},e,{currentSong:t})}))),"delete",m.availableAction="delete",n.push(i),c.push(m);case 22:d++,e.next=8;break;case 25:b(!1),r((function(e){return Object(u.a)({},e,{tracks:l,customPlaylist:n,playlistTracks:c})}));case 27:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(o.a.mark((function e(t,n,c){var i,s,d,m,b,p,y,k,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(u.a)({},a.currentSong),d=Object(l.a)(a.customPlaylist),m=Object(l.a)(a.playlistTracks),b=Object(u.a)({},a.tracks),p=[a.genre.id],!t.YouTubeId){e.next=9;break}i=t.YouTubeId,e.next=12;break;case 9:return e.next=11,f(t.artist,t.title);case 11:i=e.sent;case 12:""===b[p][n].YouTubeId&&(b[p][n].YouTubeId=i,r((function(e){return Object(u.a)({},e,{tracks:b})}))),"play"===c?window.screen.width>767?(y={rank:t.rank,title:t.title,artist:t.artist,album:t.album,art:t.art,YouTubeId:i,key:t.key,availableAction:t.availableAction,trackGenre:t.trackGenre,trackIndex:t.trackIndex},!1,r((function(e){return Object(u.a)({},e,{currentSong:y,watchingPlaylist:!1})}))):(k="https://www.youtube.com/watch?v=".concat(i),window.open(k,"_blank").focus()):d.includes(i)?(s.YouTubeId===i&&(s.availableAction="add",r((function(e){return Object(u.a)({},e,{currentSong:s})}))),v=t.trackGenre,d=d.filter((function(e){return e!==i})),b[v][n].availableAction="add",m=m.filter((function(e){return e.YouTubeId!==i})),r((function(e){return Object(u.a)({},e,{tracks:b,customPlaylist:d,playlistTracks:m})})),0===d.length&&!0===a.watchingPlaylist&&(!1,r((function(e){return Object(u.a)({},e,{watchingPlaylist:!1})})))):!1===d.includes(i)&&(s.YouTubeId===i&&(s.availableAction="delete",r((function(e){return Object(u.a)({},e,{currentSong:s})}))),d=[].concat(Object(l.a)(a.customPlaylist),[i]),t.availableAction="delete",m=[].concat(Object(l.a)(a.playlistTracks),[t]),b[p][n].availableAction="delete",r((function(e){return Object(u.a)({},e,{tracks:b,customPlaylist:d,playlistTracks:m})})));case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(o.a.mark((function e(t,a,n){var r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"AIzaSyDJG4uwhqh0A4gCLmgQuDhyJM7DK57dbDk","002575468132888478770:v1qvdfuvdlz",e.next=4,g.get("?",{params:{key:"AIzaSyDJG4uwhqh0A4gCLmgQuDhyJM7DK57dbDk",cx:"002575468132888478770:v1qvdfuvdlz",q:"".concat(a," ").concat(n)}});case 4:if(r=e.sent,"undefined"===typeof(c=r.data.items)){e.next=12;break}i=c[0].link,window.open(i,"_blank").focus(),e.next=13;break;case 12:return e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return{state:a,headers:a.headers,genre:a.genre,tracks:a.tracks,currentSong:a.currentSong,customPlaylist:a.customPlaylist,watchingPlaylist:a.watchingPlaylist,isLoading:s,playlistTracks:a.playlistTracks,clearPlaylist:function(){var e=[],t=[],n=Object(u.a)({},a.tracks),c=[a.genre.id];for(var i in n){for(var l in i)n[c][l].availableAction="add";r((function(a){return Object(u.a)({},a,{tracks:n,customPlaylist:e,playlistTracks:t})}))}r((function(e){return Object(u.a)({},e,{watchingPlaylist:!1})}))},viewPlaylist:function(){r((function(e){return Object(u.a)({},e,{watchingPlaylist:!0})}))},fetchYoutube:f,fetchGenrePlaylist:p,getGenre:function(e){r((function(t){return Object(u.a)({},t,{genre:e})}))},handleCurrentSong:k,getLyrics:v}},x=a(22),E=a.n(x),O=r.a.memo((function(){var e=w().getGenre;return r.a.createElement("div",{id:"header",className:"dark"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:E.a,alt:""})),r.a.createElement("div",{className:"genre_container"},[{id:"top100",path:"DM0000",text:"Top 100"},{id:"kpop",path:"GN0200",text:"K-Pop"},{id:"rap",path:"GN0300",text:"Rap/Hiphop"},{id:"rb",path:"GN0400",text:"R&B"},{id:"indie",path:"GN0500",text:"Indie"},{id:"rock",path:"GN0600",text:"Rock"},{id:"balad",path:"GN0100",text:"Balads"},{id:"trot",path:"GN0700",text:"Trot"},{id:"folk",path:"GN0800",text:"Folk"}].map((function(t){return r.a.createElement("div",{id:t.id,className:"genre",key:t.path,onClick:function(){e(t)}},t.text)}))))})),j=function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement("div",{className:"playlist_header"},r.a.createElement("div",{className:"ranking"},"Ranking"),r.a.createElement("div",{className:"song"},"Song Title"),r.a.createElement("div",{className:"artist"},"Artist"),r.a.createElement("div",{className:"album"},"Album"))))},A=a(5),N=a.n(A),T=function(e){var t,a=w().watchingPlaylist;if(!0===a)t="https://www.youtube.com/embed/VIDEO_ID?playlist=".concat(e.playlist);else{if(!1!==a)return"";t="https://www.youtube.com/embed/".concat(e.youtubeID)}return r.a.createElement("div",{id:"iframe_container"},r.a.createElement("iframe",{id:"ytplayer",title:e.youtubeID,className:"playlist",type:"text/html",width:"900",height:"506",allowFullScreen:"allowfullscreen",src:t}))},I=function(e){var t,a=e.track,n=e.index,c=w(),i=c.customPlaylist,l=c.handleCurrentSong,u=c.getLyrics;return r.a.createElement("div",{className:"ui item row",key:a.key},r.a.createElement("div",{className:"trackWrapper ui sixteen wide column grid"},r.a.createElement("div",{className:"grid ui fourteen wide column"},r.a.createElement("div",{className:"trackFaqs ui  floated left sixteen wide  row"},r.a.createElement("div",{className:"rank"},a.rank),r.a.createElement("div",{className:"art_img ui image"},r.a.createElement("img",{src:a.art,alt:""})),r.a.createElement("div",{className:"song_title "},a.title),r.a.createElement("div",{className:"artist_name"},a.artist),r.a.createElement("div",{className:"album_name"},a.album))),r.a.createElement("div",{className:"mediaLinks two wide ui padded column"},r.a.createElement("div",{className:"ui column"},r.a.createElement("div",{className:"mediaButton ui button red  centered fa-2x watchOnYT",style:{display:"inline-block"},onClick:function(){l(a,n,"play")}},r.a.createElement("i",{className:"fab fa-youtube"}),r.a.createElement("div",{className:"buttonText"},"Watch")),r.a.createElement("div",{className:"mediaButton ui button grey centered fa-2x watchOnYT",id:"playlistButton",style:{display:"inline-block"},onClick:function(){l(a,n,a.availableAction)}},r.a.createElement("i",{className:"fab fa-youtube"}),r.a.createElement("div",{className:"buttonText"},(t=a.availableAction,0===i.length?"Playlist":"add"===t&&i.length>0&&i.length<50?"Add":"delete"===t?"Delete":void 0))),r.a.createElement("div",{className:"mediaButton ui button black  centered fa-2x watchOnYT",id:"lyricButton",style:{display:"inline-block"},onClick:function(){u(a.artist,a.title,a.album)}},r.a.createElement("i",{className:"fab"}),r.a.createElement("div",{className:"buttonText"},"Lyrics"))))))};var P=function(){var e=w(),t=e.watchingPlaylist,a=e.playlistTracks,n=e.currentSong;return r.a.createElement("div",{id:"current_playlist_container"},function(){var e=a;if(!1===t)return r.a.createElement("div",{id:"current_song"},r.a.createElement(I,{track:n,index:n.trackIndex,key:n.YouTubeId}));if(!0===t){var c=N.a.toArray(e).map((function(e,t){return r.a.createElement(I,{track:e,index:e.trackIndex,key:t})}));return r.a.createElement("div",{id:"custom_playlist_container",className:"ui list grid"}," ",c," ")}return"Loading..."}())};var S=r.a.memo((function(){var e=w(),t=e.state,a=e.genre,n=e.currentSong,c=e.isLoading,i=e.fetchGenrePlaylist,l=e.customPlaylist,u=e.clearPlaylist,s=e.viewPlaylist,o=function(){if(N.a.size(t.tracks[a.id])>0&&"undefined"!==N.a.size(t.tracks[a.id]))return r.a.createElement("div",{className:"ui button red basic fa-2x watchOnYT",style:{display:"inline-block"},onClick:function(){i()}},c?"Loading...":"Quick ".concat(t.genre.text," Playlist"))},d=function(){return l.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"ui button red basic fa-2x watchOnYT",style:{display:"inline-block"},onClick:function(){s()}},"View Playlist (",l.length,")"),r.a.createElement("div",{className:"ui button red basic fa-2x watchOnYT",style:{display:"inline-block"},onClick:function(){u()}},"Delete Playlist")):""};return r.a.createElement(r.a.Fragment,null,function(){if(0!==N.a.size(t.tracks))return r.a.createElement("div",null,r.a.createElement(T,{youtubeID:n.YouTubeId,playlist:l}),r.a.createElement("div",{id:"button_container"},o(),d()),r.a.createElement(P,null))}())})),D=function(){var e=function(e){window.open(e,"_blank").focus()};return r.a.createElement("div",{id:"footer"},r.a.createElement("div",null,"WaterMelon uses YouTube API Services"),r.a.createElement("div",{id:"policyButtons"},r.a.createElement("div",{onClick:function(){return e("https://policies.google.com/privacy")}},"Google Privacy Policy"),r.a.createElement("span",{id:"divide"},"    |    "),r.a.createElement("div",{onClick:function(){return e("https://www.youtube.com/t/terms")}}," YouTube ToS")))},Y=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"playlist_container"},r.a.createElement("div",{className:"fa-3x"},r.a.createElement("i",{className:"fas fa-circle-notch fa-spin"}))))},C=r.a.memo((function(){var e=w(),t=e.isLoading,a=e.genre,n=e.tracks;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"playlist_container",className:"ui relaxed centered list grid"},function(){var e=n[a.id];if(t||!e)return r.a.createElement(Y,null);var c=(e=N.a.toArray(e)).map((function(e,t){return r.a.createElement(I,{track:e,index:t,key:t})}));return r.a.createElement(r.a.Fragment,null,c)}()))})),G=function(){return r.a.createElement("div",{id:"main_container",className:"App ui container"},r.a.createElement(v,null,r.a.createElement(O,null),r.a.createElement("div",{className:"ui grid equal width"},r.a.createElement("div",{className:"ui row centered "},r.a.createElement("div",{className:"six wide column mobilePlaylist",id:"mobile"},r.a.createElement(j,null),r.a.createElement(C,null)),r.a.createElement("div",{className:"six wide column middle nowPlaying"},r.a.createElement(S,null))))),r.a.createElement(D,null))};i.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.02e2441b.chunk.js.map